<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        
        img {
            vertical-align: bottom;
        }
        
        a {
            text-decoration: none;
            color: #000000;
        }
        
        .box {
            width: 1172px;
            margin: 30px auto;
            position: relative;
            border: 1px solid rgb(161, 153, 153);
            border-radius: 20px;
        }
        
        .box .item {
            width: 220px;
            box-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            overflow: hidden;
            position: absolute;
            left: 0;
            top: 0;
        }
        
        .box .item a {
            display: block;
            padding-bottom: 10px;
        }
        
        .box .item a:hover {
            background: rgba(0, 0, 0, 0.2);
        }
        
        .box .item .pro_img {
            width: 100%;
        }
        
        .box .item .desc {
            padding-left: 17px;
            padding-right: 41px;
            font-size: 14px;
            margin-top: 19px;
            margin-bottom: 15px;
        }
        
        .box .user_info {
            padding-left: 15px;
            padding-right: 17px;
            height: 28px;
        }
        
        .box .user_info .user_pic {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            vertical-align: middle;
        }
        
        .box .user_info .user_name {
            font-size: 12px;
            color: #555555;
        }
        
        .box .user_info .heart_box {
            float: right;
        }
        
        .box .user_info .heart_box .heart {
            width: 18px;
            height: 18px;
            vertical-align: middle;
        }
        
        .box .user_info .heart_box .num {
            font-size: 12px;
            color: #555555;
        }
        
        .more {
            color: #ff2741;
            font-weight: bold;
            font-size: 18px;
            text-align: center;
            margin-bottom: 50px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="box">
        <div class="item">
            <a href="#">
                <img src="images/pic/01.jpg" class="pro_img" />
                <div class="desc">æ‹¥æœ‰ä¸€å°å®¾åˆ©GTï¼Œå¦‚ä½•æ‹ï¼Œæ‰ä¸ä¼šè¢«è¯´ç‚«å¯Œï¼Ÿ</div>
                <div class="user_info">

                    <img src="images/touxiang/01.jpg" class="user_pic" />
                    <span class="user_name">é‡‘è‹±ç„•</span>

                    <div class="heart_box">
                        <img src="images/heart.png" class="heart" />
                        <span class="num">104</span>
                    </div>

                </div>
            </a>
        </div>

        <div class="item">
            <a href="#">
                <img src="images/pic/02.jpg" class="pro_img" />
                <div class="desc">ğŸ›æ¸…å‡‰ä¸€å¤ï¼Œå®å®ç”¨çš„è¿™äº›ä¸œè¥¿ä½ ğŸ‰çŸ¥é“â€¦</div>
                <div class="user_info">

                    <img src="images/touxiang/02.jpg" class="user_pic" />
                    <span class="user_name">æˆ‘æ˜¯ç‰›æ²¹æœå‘€å‘€</span>

                    <div class="heart_box">
                        <img src="images/heart.png" class="heart" />
                        <span class="num">112</span>
                    </div>

                </div>
            </a>
        </div>

        <div class="item">
            <a href="#">
                <img src="images/pic/03.jpg" class="pro_img" />
                <div class="desc">è¿™äº›è¶…ç«çš„åŠ¨æ¼«å°è¯ä½ ç»å¯¹éƒ½æœ‰å¬è¿‡</div>
                <div class="user_info">

                    <img src="images/touxiang/03.jpg" class="user_pic" />
                    <span class="user_name">å­¦è¯´æ—¥è¯­</span>

                    <div class="heart_box">
                        <img src="images/heart.png" class="heart" />
                        <span class="num">305</span>
                    </div>

                </div>
            </a>
        </div>

        <div class="item">
            <a href="#">
                <img src="images/pic/04.jpg" class="pro_img" />
                <div class="desc">é«˜æ®µä½çš„ç§‘å­¦è‚²å„¿ç†å¿µï¼åŸæ¥æ˜¯å®ƒï½</div>
                <div class="user_info">

                    <img src="images/touxiang/04.jpg" class="user_pic" />
                    <span class="user_name">å°è¿·å§å„¿æ˜¯è±†è±†é¾™</span>

                    <div class="heart_box">
                        <img src="images/heart.png" class="heart" />
                        <span class="num">101</span>
                    </div>

                </div>
            </a>
        </div>

        <div class="item">
            <a href="#">
                <img src="images/pic/05.jpg" class="pro_img" />
                <div class="desc">æ²¡æƒ³åˆ°å› ä¸ºå©´å„¿æ¨è½¦ï¼Œæˆ‘å±…ç„¶è¢«å­©å­çˆ¸å¤¸äº†â€¦</div>
                <div class="user_info">

                    <img src="images/touxiang/05.jpg" class="user_pic" />
                    <span class="user_name">æˆ‘æ˜¯ç‰›æ²¹æœå‘€å‘€</span>

                    <div class="heart_box">
                        <img src="images/heart.png" class="heart" />
                        <span class="num">164</span>
                    </div>

                </div>
            </a>
        </div>

        <div class="item">
            <a href="#">
                <img src="images/pic/06.jpg" class="pro_img" />
                <div class="desc">æ—¥å¸¸vlogï½œå¦ˆå¦ˆã€åšä¸»ï¼Œæ¯å¤©èº«ä»½è½¬æ¢</div>
                <div class="user_info">

                    <img src="images/touxiang/06.jpg" class="user_pic" />
                    <span class="user_name">æœ¨å¤•_æœ¨</span>

                    <div class="heart_box">
                        <img src="images/heart.png" class="heart" />
                        <span class="num">976</span>
                    </div>

                </div>
            </a>
        </div>

        <div class="item">
            <a href="#">
                <img src="images/pic/07.jpg" class="pro_img" />
                <div class="desc">è¿™ä¸ªé£Ÿè°±æ‘†æ‘Šèƒ½ä¸èƒ½èµšåˆ°å­¦è´¹å¤§å®¶å¸®å¿™å‚è€ƒä¸€ä¸‹ğŸ˜‚</div>
                <div class="user_info">

                    <img src="images/touxiang/07.jpg" class="user_pic" />
                    <span class="user_name">å½­é›¨è·baby</span>

                    <div class="heart_box">
                        <img src="images/heart.png" class="heart" />
                        <span class="num">1373</span>
                    </div>

                </div>
            </a>
        </div>
    </div>

    <div class="more">æŸ¥çœ‹æ›´å¤š</div>

    <script src="js/jquery.min.js"></script>
    <script>
        // å°è£…ä¸€ä¸ªå‡½æ•°æ±‚å‡ºæŒ‡å®šæ•°ç»„çš„æœ€å°å€¼å’Œæœ€å°ç´¢å¼•å·
        function getArrMin(arr) {
            var minIndex = 0;
            var minVal = arr[minIndex];
            for (var i = 1; i < arr.length; i++) {
                if (minVal > arr[i]) { // åˆ¤æ–­å¤§å°
                    minVal = arr[i]; // æˆä¸ºæ–°çš„æœ€å°å€¼
                    minIndex = i;
                }
            }
            return {
                minIndex: minIndex,
                minVal: minVal
            }
        }


        // é¡¹ç›®ä¹‹é—´çš„é—´éš”è·ç¦»
        var gap = 18;
        // é¡¹ç›®çš„å®½åº¦
        var itemWidth = $(".item").width(); // 220
        // æœ€å¤§åˆ—æ•°
        var maxColumn = Math.floor($(".box").width() / (itemWidth)); // 5

        // å°è£…ä¸€ä¸ªç€‘å¸ƒæµå‡½æ•°
        function waterfallFlow() {
            // å®šä¹‰ä¸€ä¸ªæ•°ç»„,ä¿å­˜æ‰€æœ‰åˆ—çš„æ€»é«˜åº¦
            var arrHeight = [];

            // éå†æ‰€æœ‰.item
            $(".box .item").each(function(index, domElement) {
                if (index < maxColumn) { // å¦‚æœæ˜¯ç¬¬ä¸€è¡Œ
                    $(domElement).css({
                        top: 0,
                        left: (itemWidth + gap) * index
                    });
                    // æŠŠç¬¬ä¸€åˆ—çš„é«˜åº¦æ”¾è¿›arrHeightæ•°ç»„ä¸­
                    arrHeight.push($(domElement).height())
                } else { // ç¬¬ä¸€è¡Œä¹‹å¤–çš„å…¶ä»–è¡Œ
                    // å› ä¸ºå›¾ç‰‡æ˜¯ä¸€ç§éœ€è¦èŠ±è´¹æ—¶é—´åŠ è½½çš„èµ„æº,æ‰€ä»¥æˆ‘ä»¬ä¸èƒ½é©¬ä¸Šå°±å»è·å–å›¾ç‰‡çš„é«˜åº¦å€¼
                    // éœ€è¦ç­‰å›¾ç‰‡åŠ è½½å®Œæ¯•ä»¥åå†è·å–
                    // å¼€å¯ä¸€ä¸ªå»¶æ—¶å™¨,å‡è®¾ä¸€ä¸ªæ—¶é—´,è®©å›¾ç‰‡æœ‰æ—¶é—´å¯ä»¥åŠ è½½
                    setTimeout(function() {
                        // æ±‚å‡ºæ‰€æœ‰åˆ—çš„æ€»é«˜åº¦,å†æ±‚å‡ºæ‰€æœ‰åˆ—æ€»é«˜åº¦æœ€å°,ä»¥åŠå½“å‰åˆ—å¯¹åº”çš„ç´¢å¼•å·
                        var minObj = getArrMin(arrHeight);
                        // æœ€å°åˆ—åºå·
                        var minIndex = minObj.minIndex;
                        // æœ€å°åˆ—é«˜åº¦
                        var minVal = minObj.minVal;
                        $(domElement).css({
                            top: minVal + gap,
                            left: (itemWidth + gap) * minIndex
                        });
                        // æ›´æ–°åˆ—é«˜åº¦
                        arrHeight[minIndex] = minVal + gap + $(domElement).height();
                    }, 200)
                }
            });

            setTimeout(function() {
                // å› ä¸º.boxé‡Œé¢çš„æ‰€æœ‰.iteméƒ½æ˜¯ç»å¯¹å®šä½,ä»–ä»¬éƒ½è„±æ ‡äº†,å¯¼è‡´äº†.boxæ²¡æœ‰é«˜åº¦,ä½†æ˜¯.boxåˆä¸æ˜¯è®¾ç½®ä¸€ä¸ªå›ºå®šçš„é«˜åº¦,.boxçš„é«˜åº¦éœ€è¦è®¡ç®—
                // .boxçš„é«˜åº¦,å°±æ˜¯æœ€å¤§åˆ—çš„æ€»é«˜åº¦
                var maxHeight = Math.max.apply(null, arrHeight);
                // è®¾ç½®.boxçš„é«˜åº¦
                $(".box").height(maxHeight);
            }, 300);

        }

        // è°ƒç”¨ä¸€æ¬¡ç€‘å¸ƒæµå‡½æ•°
        waterfallFlow();

        // å®šä¹‰æ•°æ®
        var data = [{
                "imgNum": "01",
                "desc": "æ‹¥æœ‰ä¸€å°å®¾åˆ©GTï¼Œå¦‚ä½•æ‹ï¼Œæ‰ä¸ä¼šè¢«è¯´ç‚«å¯Œï¼Ÿ",
                "username": "é‡‘è‹±ç„•",
                "num": 102
            }, {
                "imgNum": "02",
                "desc": "ğŸ›æ¸…å‡‰ä¸€å¤ï¼Œå®å®ç”¨çš„è¿™äº›ä¸œè¥¿ä½ ğŸ‰çŸ¥é“â€¦",
                "username": "æˆ‘æ˜¯ç‰›æ²¹æœå‘€å‘€",
                "num": 112
            }, {
                "imgNum": "03",
                "desc": "è¿™äº›è¶…ç«çš„åŠ¨æ¼«å°è¯ä½ ç»å¯¹éƒ½æœ‰å¬è¿‡",
                "username": "å­¦è¯´æ—¥è¯­",
                "num": 305
            }, {
                "imgNum": "04",
                "desc": "é«˜æ®µä½çš„ç§‘å­¦è‚²å„¿ç†å¿µï¼åŸæ¥æ˜¯å®ƒï½",
                "username": "å°è¿·å§å„¿æ˜¯è±†è±†é¾™",
                "num": 101
            }, {
                "imgNum": "05",
                "desc": "æ²¡æƒ³åˆ°å› ä¸ºå©´å„¿æ¨è½¦ï¼Œæˆ‘å±…ç„¶è¢«å­©å­çˆ¸å¤¸äº†â€¦",
                "username": "æˆ‘æ˜¯ç‰›æ²¹æœå‘€å‘€",
                "num": 164
            }, {
                "imgNum": "06",
                "desc": "æ—¥å¸¸vlogï½œå¦ˆå¦ˆã€åšä¸»ï¼Œæ¯å¤©èº«ä»½è½¬æ¢",
                "username": "æœ¨å¤•_æœ¨",
                "num": 976
            }, {
                "imgNum": "07",
                "desc": "è¿™ä¸ªé£Ÿè°±æ‘†æ‘Šèƒ½ä¸èƒ½èµšåˆ°å­¦è´¹å¤§å®¶å¸®å¿™å‚è€ƒä¸€ä¸‹ğŸ˜‚",
                "username": "å½­é›¨è·baby",
                "num": 1373
            }, {
                "imgNum": "08",
                "desc": "å’Œæ²¹æ±¡èŸ‘è‚say byebyeï½œå¨æˆ¿æ¸…æ´å¥½ç‰©åˆ†äº«",
                "username": "Cikoe",
                "num": 60
            }, {
                "imgNum": "09",
                "desc": "ä¸Šè¡—è¶…æƒ¹çœ¼å®å…‰MINI EVï¼Œå¸‚åŒºä»£æ­¥è½¦æ€§ä»·é«˜",
                "username": "ä¸€é¢—å°ç”œæ¬£",
                "num": 80
            }, {
                "imgNum": "10",
                "desc": "ğŸ“¢å¿«å¼€å­¦äº†ï¼ï¼ï¼å†ä¸å‡†å¤‡å°±æ™šäº†âœ…",
                "username": "æˆ‘å«å°è±†æµ†",
                "num": 261
            },


            {
                "imgNum": "11",
                "desc": "è†ç”°æ¢åº—ï½œæ—¶é›¾ç¾æœ¯é¦†",
                "username": "iamlittley",
                "num": 43
            }, {
                "imgNum": "12",
                "desc": "å‚åŠ æ´»åŠ¨é‡åˆ°å–œæ¬¢åšä¸» ç¬é—´å˜æˆå°è¿·å¦¹",
                "username": "Chiliå¾è¾£å„¿",
                "num": 112
            }, {
                "imgNum": "13",
                "desc": "å­¦ä¹ å¹²è´§ğŸ“–å„ç§‘ç¬”è®°è®°ä»€ä¹ˆï¼Œä¸çœ‹åæ‚”âœ“",
                "username": "è´ºå«å…½",
                "num": 1687
            }, {
                "imgNum": "14",
                "desc": "ç™½è‰²çš„å·å´H2ä½ è§è¿‡å—",
                "username": "æœºè½¦ç›®å½•",
                "num": 146
            }, {
                "imgNum": "15",
                "desc": "My MelodyğŸ€ï½œç¾ä¹è’‚å°‘å¥³å¿ƒç”Ÿæ´»åŠ©æ‰‹",
                "username": "é¸­é¸­åƒé¥­å•¦",
                "num": 2148
            }, {
                "imgNum": "16",
                "desc": "å¥³ç”Ÿå¿…å­¦ç´§æ€¥ç˜¦èº«æ³•â€¼ï¸ä¸€å‘¨å°±èƒ½ç˜¦å…«æ–¤âœ”ï¸",
                "username": "æ¡ƒæ¡ƒçˆ±åƒæ¡ƒ",
                "num": 910
            }, {
                "imgNum": "17",
                "desc": "æ¢…å®¶æ™šé¥­",
                "username": "æ¢…ä¹‹å°æ¦­",
                "num": 129
            }, {
                "imgNum": "18",
                "desc": "è¶ŠæŠ¤è‚¤è¶Šæ²¹â“åˆ†äº«æ··æ²¹ç—˜è‚Œçš„è‡ªç”¨ç»éªŒ",
                "username": "å®ä¸ƒä¸ƒYuki",
                "num": 84
            }, {
                "imgNum": "19",
                "desc": "ã€NO.62ã€å†™ä½œè¯¾ğŸ“’â… å«å†™ä½œä¹¦å•æ•´ç†ğŸ“š",
                "username": "è‹æ‚ æ‰¬",
                "num": 163
            }, {
                "imgNum": "20",
                "desc": "é­”éƒ½æ¢åº—ï½œèŠ‹æ³¥ç‰›å¥¶å†°æ²™â€¼ï¸å®è—ç”œå“åº—â€¼ï¸",
                "username": "Angelaå½±",
                "num": 869
            }
        ];

        // ç»™æŸ¥çœ‹æ›´å¤šç»‘å®šé¼ æ ‡ç‚¹å‡»äº‹ä»¶
        $(".more").on("click", function() {
            // éšæœºä»dataæ•°ç»„å–å‡º5ä¸ªä¸é‡å¤æ•°ç»„å…ƒç´ 
            data.sort(function() { // éšæœºæ’åº
                return Math.random() - 0.5;
            });

            // æˆªå–(åˆ é™¤)å‰5ä¸ªæ•°ç»„å…ƒç´ 
            var resData = data.splice(0, 5);

            if (resData.length == 0) {
                $(".more").html("æ²¡æœ‰æ›´å¤šæ•°æ®å•¦~~~").css("color", "gray");
                $(".more").off("click"); // è§£ç»‘äº‹ä»¶
                return;
            }

            // éå†resDataåŠ¨æ€æ·»åŠ 5ä¸ª.item
            $.each(resData, function(index, item) {
                // åŠ¨æ€åˆ›å»º.item
                var newItem = $(`<div class="item">
                    <a href="#">
                        <img src="images/pic/${item.imgNum}.jpg" class="pro_img"/>
                        <div class="desc">${item.desc}</div>
                        <div class="user_info">

                            <img src="images/touxiang/${item.imgNum}.jpg" class="user_pic"/>
                            <span class="user_name">${item.username}</span>

                            <div class="heart_box">
                                <img src="images/heart.png" class="heart"/>
                                <span class="num">${item.num}</span>
                            </div>
                            
                        </div>
                    </a>
                </div>`);
                // è¿½åŠ åˆ°.boxä¸­
                $(".box").append(newItem);
                // éšè—å…ƒç´ 
                newItem.hide();
                // æ·¡å…¥å…ƒç´ 
                newItem.fadeIn();
            })

            // è°ƒç”¨ç€‘å¸ƒæµå‡½æ•°
            waterfallFlow();

            setTimeout(function() {
                // åŠ¨ç”»æ»šåŠ¨é¡µé¢åˆ°åº•éƒ¨
                $("body,html").animate({
                    scrollTop: $(".box").height()
                });
            }, 500);
        });
    </script>
</body>

</html>